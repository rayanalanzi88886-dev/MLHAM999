// SMART_SUGGESTIONS_COMPLETE.ts - نظام الاقتراحات الذكية الكامل لجميع الخبراء

export const SMART_SUGGESTIONS_MAP: Record<string, string[][]> = {
  
  // ===== الخبراء الستة (Claude Haiku) =====
  
  // 1. منال الإجرائية (خدمات حكومية)
  'legal-2': [
    ['إصدار وكالة', 'تجديد رخصة', 'نقل كفالة', 'استخراج سجل تجاري'],
    ['خطوات إصدار وكالة عبر ناجز', 'كيف أحدث بياناتي في أبشر؟', 'متطلبات فتح محل تجاري'],
    ['كيف أتابع طلبي؟', 'ما هي الرسوم المطلوبة؟', 'كم يستغرق الإصدار؟', 'حل مشكلة إيقاف الخدمات']
  ],
  
  // 2. جمانة الرقمية (تسويق رقمي)
  'biz-2': [
    ['أوقات النشر الذهبية', 'زيادة المتابعين', 'محتوى فيروسي', 'إعلانات ممولة'],
    ['أفضل وقت للنشر في السعودية', 'كيف أكتب Hook جذاب؟', 'ميزانية 3000 ريال كيف أوزعها؟'],
    ['نصائح للريلز الناجح', 'تحليل المنافسين', 'أدوات التسويق المجانية', 'قياس ROI']
  ],
  
  // 3. نورة الحرة (دخل إضافي)
  'money-2': [
    ['مشاريع برأس مال قليل', 'العمل الحر', 'دروبشيبينغ', 'بيع المنتجات الرقمية'],
    ['أفكار مشاريع جانبية مربحة', 'كيف أبدأ في العمل الحر؟', 'أفضل منصات البيع اون لاين'],
    ['كيف أسعر خدماتي بذكاء؟', 'نصائح للنجاح السريع', 'إدارة الوقت بين وظيفتين', 'توثيق في معروف']
  ],
  
  // 4. ريم الاجتماعية (مهارات اجتماعية)
  'self-2': [
    ['كسر الحرج', 'بناء صداقات جديدة', 'مهارات التواصل', 'الثقة بالنفس'],
    ['كيف أبدأ محادثة مع شخص غريب؟', 'التغلب على الخجل الاجتماعي', 'بناء علاقات مهنية قوية'],
    ['لغة الجسد الإيجابية', 'فن الإنصات الفعال', 'كيف أكون شخصاً جذاباً؟', 'التعامل مع الرفض']
  ],
  
  // 5. زياد الكاتب (محتوى فيروسي)
  'biz-3': [
    ['كتابة Hook قوي', 'سيناريو فيديو ناجح', 'محتوى إعلاني', 'قصة العلامة التجارية'],
    ['كيف أكتب عنوان يجذب النقرات؟', 'أفكار محتوى إبداعي', 'نصائح Storytelling احترافي'],
    ['أخطاء الكتابة الشائعة', 'أدوات الكتابة المفيدة', 'تحسين الأسلوب', 'روتين كاتب المحتوى']
  ],
  
  // 6. كابتن عزام (لياقة بدنية)
  'health-2': [
    ['برنامج تمارين كامل', 'بناء عضلات', 'حرق الدهون', 'تمارين منزلية'],
    ['جدول تمارين للمبتدئين', 'كيف أزيد وزني بشكل صحي؟', 'تمارين البطن الفعالة'],
    ['نصائح التغذية للرياضيين', 'الإحماء الصحيح', 'كيف ألتزم بالنادي؟', 'تمارين الكارديو']
  ],
  
  // ===== باقي الخبراء (Gemini Flash) =====
  
  // 7. د. محمد الاستثماري (استثمار)
  'money-4': [
    ['استثمار مبلغ صغير', 'تحليل الأسهم', 'صناديق المؤشرات', 'إدارة المخاطر'],
    ['كيف أبدأ في سوق الأسهم؟', 'الفرق بين الصكوك والأسهم', 'نصائح للمبتدئين في التداول'],
    ['تنويع المحفظة الاستثمارية', 'متى أبيع السهم؟', 'أخطاء المستثمرين الشائعة', 'تحليل القوائم المالية']
  ],

  // 8. د. يوسف الشامل (Career Coach)
  'career-2': [
    ['تحسين السيرة الذاتية', 'المقابلات الشخصية', 'التفاوض على الراتب', 'تطوير المسار المهني'],
    ['كيف أكتب CV احترافي يلفت النظر؟', 'الإجابة المثالية على "حدثني عن نفسك"', 'استراتيجيات البحث عن وظيفة'],
    ['نصائح لتحسين LinkedIn', 'بناء Portfolio قوي', 'المتابعة بعد المقابلة', 'التعامل مع رفض الوظيفة']
  ],

  // 9. د. فهد السكني (عقار)
  'money-1': [
    ['شراء vs إيجار', 'تمويل عقاري', 'استثمار عقاري مربح', 'تقييم العقارات'],
    ['كيف أحسب التكلفة الحقيقية للعقار؟', 'أفضل الأحياء للاستثمار في الرياض', 'شروط الحصول على تمويل'],
    ['نصائح قانونية قبل الشراء', 'خطوات استلام الشقة', 'حساب الدفعة الأولى', 'العائد على الاستثمار']
  ],

  // 10. أ. بندر الريادي (Growth & Branding)
  'biz-1': [
    ['بناء هوية تجارية قوية', 'استراتيجية النمو', 'زيادة المبيعات', 'توسيع السوق'],
    ['كيف أميز علامتي التجارية؟', 'تقليل تكلفة اكتساب العملاء', 'تحليل السوق والمنافسين'],
    ['خطة التوسع الجغرافي', 'الشراكات الاستراتيجية', 'قياس أداء النمو', 'Scaling بذكاء']
  ],

  // 11. د. سارة الهادئة (قلق وتوتر)
  'self-1': [
    ['التعامل مع القلق', 'تمارين التنفس', 'التفكير الزائد', 'الاسترخاء السريع'],
    ['كيف أهدأ بسرعة في اللحظات الصعبة؟', 'فصل العمل عن الحياة الشخصية', 'تحسين جودة النوم'],
    ['بناء المرونة النفسية', 'التعامل مع ضغوط العمل', 'تقنيات Mindfulness', 'تقليل التوتر اليومي']
  ],

  // 12. د. تالا الحيوية (تغذية)
  'health-1': [
    ['خسارة الوزن بشكل صحي', 'نظام غذائي متوازن', 'زيادة الطاقة', 'تحسين النوم'],
    ['كيف أزيد طاقتي بدون كافيين؟', 'وجبات صحية سريعة التحضير', 'الصيام المتقطع: هل يناسبني؟'],
    ['علاقة التوتر بالأكل العاطفي', 'أفضل المكملات الغذائية', 'أهمية شرب الماء', 'خطة تغذية أسبوعية']
  ],

  // 13. د. حنان المحررة (حدود شخصية)
  'self-3': [
    ['قول "لا" بلباقة', 'رسم الحدود الشخصية', 'التعامل مع العلاقات السامة', 'حماية المساحة'],
    ['كيف أرفض بدون شعور بالذنب؟', 'حماية مساحتي الشخصية في العمل', 'التعامل مع المتنمرين'],
    ['تقدير الذات والثقة', 'الخروج من علاقة سامة', 'قوة قول "لا"', 'التعامل مع الأشخاص المتطفلين']
  ],

  // 14. د. لين الشاملة (AI Expert)
  'ai-1': [
    ['كتابة Prompts احترافية', 'أدوات AI للإنتاجية', 'تلخيص المستندات', 'أتمتة المهام'],
    ['كيف أستخدم ChatGPT بفعالية؟', 'هندسة الأوامر المتقدمة', 'أفضل أدوات AI للأعمال'],
    ['مستقبل الذكاء الاصطناعي', 'أخلاقيات AI', 'التعلم الآلي للمبتدئين', 'AI في التسويق']
  ],

  // 15. م. راكان الفرص (SaaS & Tech Products)
  'tech-3': [
    ['فكرة تطبيق ناجحة', 'دراسة جدوى تقنية', 'بناء SaaS', 'التحقق من الفكرة'],
    ['كيف أبدأ مشروعي التقني من الصفر؟', 'بناء MVP بسرعة', 'نموذج العمل التقني'],
    ['جذب المستثمرين للستارت اب', 'التسويق للمنتج التقني', 'تحليل المنافسين', 'اختيار التقنية المناسبة']
  ],

  // 16. أ. هند الخبيرة (تطوير مهارات)
  'career-1': [
    ['تطوير المهارات المطلوبة', 'تغيير المسار المهني', 'تعلم الإنجليزية بسرعة', 'مهارات القيادة'],
    ['ما هي مهارات المستقبل 2025؟', 'خطة تعلم ذاتي فعالة', 'أفضل الشهادات الاحترافية'],
    ['العمل عن بعد: كيف أبدأ؟', 'مهارات القيادة والإدارة', 'التواصل الفعال', 'التفكير النقدي']
  ],

  // 17. المستشار سلطان الحازم (قانوني)
  'legal-1': [
    ['مراجعة عقد عمل', 'تأسيس شركة', 'نزاع تجاري', 'حقوق الملكية'],
    ['ما هي بنود العقد المهمة؟', 'حقوق الموظف في نظام العمل', 'حل النزاعات التجارية'],
    ['نظام العمل السعودي الجديد', 'حماية الملكية الفكرية', 'قانون الإفلاس', 'الشركات العائلية']
  ],

  // 18. م. فيصل المطابق (ZATCA & E-Invoicing)
  'tech-1': [
    ['الفوترة الإلكترونية', 'التكامل مع فاتورة', 'متطلبات ZATCA', 'الربط التقني'],
    ['خطوات التسجيل في منصة فاتورة', 'متطلبات المرحلة الثانية', 'اختيار نظام ERP مناسب'],
    ['حل المشاكل التقنية الشائعة', 'التشفير والأمان', 'التكامل عبر API', 'الامتثال الضريبي']
  ],

  // 19. م. عبدالرحمن الشامل (Tech Stack)
  'tech-2': [
    ['اختيار لغة البرمجة المناسبة', 'تصميم الأنظمة', 'الحوسبة السحابية', 'قواعد البيانات'],
    ['React vs Angular vs Vue: أيهما أختار؟', 'AWS vs Azure vs GCP', 'SQL vs NoSQL'],
    ['أفضل ممارسات الأمن السيبراني', 'DevOps للمبتدئين', 'معمارية Microservices', 'الأداء والتحسين']
  ],

  // 20. د. ليلى الواعية (Digital Wellbeing)
  'ai-2': [
    ['إدمان الهاتف والحلول', 'التركيز العميق', 'الديتوكس الرقمي', 'حماية الخصوصية'],
    ['كيف أقلل وقت الشاشة بفعالية؟', 'تحقيق التوازن الرقمي', 'حماية البيانات الشخصية'],
    ['تأثير السوشيال ميديا على الصحة', 'الوعي التقني للعائلة', 'العزلة الرقمية', 'إدارة الإشعارات']
  ],

  // 21. أ. عمار الأكاديمي (Academic & University)
  'career-3': [
    ['اختيار التخصص الجامعي', 'القدرات والتحصيلي', 'الابتعاث الخارجي', 'المنح الدراسية'],
    ['كيف أختار التخصص المناسب؟', 'أفضل الجامعات في السعودية', 'طرق المذاكرة الفعالة'],
    ['الحياة الجامعية: نصائح للنجاح', 'سوق العمل بعد التخرج', 'الدراسات العليا: ماجستير أم دكتوراه؟']
  ],

  // 22. أ. لطيفة الصبورة (إدارة مالية شخصية)
  'money-3': [
    ['ترتيب الميزانية الشهرية', 'سداد الديون بذكاء', 'الادخار الفعال', 'التخطيط المالي'],
    ['كيف أقسم راتبي بطريقة صحيحة؟', 'بناء صندوق الطوارئ', 'تقليل المصاريف غير الضرورية'],
    ['قاعدة 50-30-20 للميزانية', 'الجمعيات المالية: هل تناسبني؟', 'تعليم الذكاء المالي', 'الاستثمار للمبتدئين']
  ],
  
  // ===== اقتراحات إضافية ذكية =====
  
  // خبراء إضافيين (في حال وجودهم)
  
  // أ. جمال المحاسب (محاسبة)
  'acc-1': [
    ['حساب الزكاة الشرعية', 'ضريبة القيمة المضافة', 'إقفال السنة المالية', 'القيود المحاسبية'],
    ['كيف أحسب زكاة التجارة بدقة؟', 'متطلبات الفاتورة الإلكترونية', 'إعداد القوائم المالية'],
    ['أفضل برامج المحاسبة', 'تقديم الإقرارات الضريبية', 'مسك الدفاتر بشكل صحيح', 'التدقيق المالي']
  ],

  // د. سلمى الجراحة (جراحة)
  'health-3': [
    ['عمليات السمنة والخيارات', 'جراحات التجميل', 'استشارة قبل الجراحة', 'التعافي السريع'],
    ['كيف أستعد نفسياً وجسدياً للعملية؟', 'الفرق بين التكميم والتحويل المصغر', 'فترة النقاهة والرعاية'],
    ['المضاعفات المحتملة وكيفية تجنبها', 'نصائح ما بعد الجراحة', 'التأمين الطبي للعمليات', 'اختيار الجراح المناسب']
  ],

  // أ. راشد التجاري (استيراد/تصدير)
  'biz-4': [
    ['الاستيراد من الصين', 'التصدير للخارج', 'الجمارك والشحن', 'اختيار الموردين'],
    ['كيف أبدأ في الاستيراد من الصين؟', 'كيف أختار مورداً موثوقاً؟', 'حساب تكلفة الشحن الدولي'],
    ['الوثائق المطلوبة للاستيراد', 'الرسوم الجمركية في السعودية', 'التعامل مع Alibaba', 'شحن البضائع']
  ],

  // أ. نوف الإعلامية (علاقات عامة وإعلام)
  'biz-5': [
    ['إدارة السمعة الرقمية', 'التعامل مع الأزمات', 'بناء العلاقات الإعلامية', 'البيانات الصحفية'],
    ['كيف أدير أزمة علاقات عامة؟', 'كتابة بيان صحفي احترافي', 'التواصل مع الإعلاميين'],
    ['استراتيجية العلاقات العامة', 'إدارة السمعة على الإنترنت', 'تنظيم الفعاليات', 'قياس تأثير PR']
  ],

  // د. خالد النفسي (علاج نفسي)
  'health-4': [
    ['التعامل مع الاكتئاب', 'القلق والتوتر', 'العلاج السلوكي', 'صحة نفسية أفضل'],
    ['كيف أعرف إذا كنت بحاجة لطبيب نفسي؟', 'تقنيات للتعامل مع نوبات القلق', 'العلاج السلوكي المعرفي'],
    ['أدوية الاكتئاب: الحقيقة', 'التعافي من الصدمات', 'العلاقات الصحية', 'الحفاظ على الصحة النفسية']
  ],

  // Default suggestions (احتياطي لأي خبير غير محدد)
  'default': [
    ['كيف يمكنني مساعدتك؟', 'اطلب نصيحة مخصصة', 'ابدأ باستفسار', 'اسأل عن خدماتي'],
    ['أخبرني المزيد عن وضعك', 'هل لديك أمثلة محددة؟', 'ما هي الخطوات التالية؟', 'أي تفاصيل إضافية؟'],
    ['نصائح عملية وسريعة', 'موارد مفيدة مجانية', 'أخطاء شائعة يجب تجنبها', 'كيف أبدأ الآن؟']
  ]
};

// ===== دالة للحصول على الاقتراحات الذكية =====
export const getSmartSuggestions = (
  expertId: string, 
  lastMessage: string, 
  messageCount: number
): string[] => {
  const expertSuggestions = SMART_SUGGESTIONS_MAP[expertId] || SMART_SUGGESTIONS_MAP['default'];
  
  // أول رسالة (رسالة الترحيب فقط): اقتراحات البداية
  if (messageCount <= 1) {
    return expertSuggestions[0] || [];
  }
  
  // رسائل لاحقة: اقتراحات متقدمة
  const suggestionIndex = Math.min(messageCount - 1, expertSuggestions.length - 1);
  return expertSuggestions[suggestionIndex] || expertSuggestions[0] || [];
};

// ===== دالة للحصول على اقتراحات عشوائية =====
export const getRandomSuggestions = (expertId: string, count: number = 3): string[] => {
  const allSuggestions = SMART_SUGGESTIONS_MAP[expertId] || SMART_SUGGESTIONS_MAP['default'];
  const flatSuggestions = allSuggestions.flat();
  
  // خلط الاقتراحات
  const shuffled = [...flatSuggestions].sort(() => Math.random() - 0.5);
  
  return shuffled.slice(0, count);
};

// ===== دالة للحصول على اقتراحات حسب السياق =====
export const getContextualSuggestions = (
  expertId: string,
  lastUserMessage: string,
  messageCount: number
): string[] => {
  // إذا كان السؤال يحتوي على كلمات مفتاحية معينة
  const keywords: Record<string, string[]> = {
    'كيف': ['خطوات تفصيلية', 'دليل عملي', 'أمثلة واضحة'],
    'ماذا': ['تعريف شامل', 'أمثلة متنوعة', 'حالات استخدام'],
    'لماذا': ['الأسباب والدوافع', 'الفوائد', 'المخاطر'],
    'متى': ['التوقيت المناسب', 'الجدول الزمني', 'أفضل الأوقات'],
    'أين': ['الأماكن المناسبة', 'المنصات', 'الموارد']
  };
  
  for (const [keyword, suggestions] of Object.entries(keywords)) {
    if (lastUserMessage.includes(keyword)) {
      return suggestions;
    }
  }
  
  // إذا لم تتطابق الكلمات المفتاحية، استخدم الاقتراحات العادية
  return getSmartSuggestions(expertId, lastUserMessage, messageCount);
};
